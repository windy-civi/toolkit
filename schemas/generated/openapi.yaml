openapi: 3.0.3
info:
  title: Legislative Data API
  version: 1.0.0
  description: API for 3 datasets
  contact:
    name: Chi Hack Night
    email: info@chihacknight.org
paths:
  /{jurisdiction}/{session}/bills/{bill_id}-{title}/metadata:
    summary: Bill Metadata
    description: Bill metadata.json files from formatted snapshots
    get:
      operationId: get_bill_metadata
      summary: Bill Metadata
      description: Bill metadata.json files from formatted snapshots
      parameters:
      - name: jurisdiction
        in: path
        required: true
        schema:
          type: string
          description: Jurisdiction code (e.g., wy, il)
          pattern: ^[a-z]{2}$
        description: Jurisdiction code (e.g., wy, il)
      - name: session
        in: path
        required: true
        schema:
          type: string
          description: Legislative session year (e.g., 2024)
          pattern: ^\d{4}$
        description: Legislative session year (e.g., 2024)
      - name: bill_id
        in: path
        required: true
        schema:
          type: string
          description: Bill identifier (e.g., SF0001, HB1234)
          pattern: ^[A-Z]{2,4}\d+$
        description: Bill identifier (e.g., SF0001, HB1234)
      - name: title
        in: path
        required: true
        schema:
          type: string
          description: URL-safe bill title
        description: URL-safe bill title
      responses:
        '404':
          description: Not found
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/bill_metadata'
  /{jurisdiction}/{session}/bills/{bill_id}-{title}/logs/{timestamp}:
    summary: Bill Vote Event Logs
    description: Vote event log files from formatted snapshots (logs/*.voteevent.json)
    get:
      operationId: get_bill_vote_event_logs
      summary: Bill Vote Event Logs
      description: Vote event log files from formatted snapshots (logs/*.voteevent.json)
      parameters:
      - name: jurisdiction
        in: path
        required: true
        schema:
          type: string
          description: Jurisdiction code (e.g., wy, il)
          pattern: ^[a-z]{2}$
        description: Jurisdiction code (e.g., wy, il)
      - name: session
        in: path
        required: true
        schema:
          type: string
          description: Legislative session year (e.g., 2024)
          pattern: ^\d{4}$
        description: Legislative session year (e.g., 2024)
      - name: bill_id
        in: path
        required: true
        schema:
          type: string
          description: Bill identifier (e.g., SF0001, HB1234)
          pattern: ^[A-Z]{2,4}\d+$
        description: Bill identifier (e.g., SF0001, HB1234)
      - name: title
        in: path
        required: true
        schema:
          type: string
          description: URL-safe bill title
        description: URL-safe bill title
      - name: timestamp
        in: path
        required: true
        schema:
          type: string
          description: ISO 8601 timestamp
          pattern: ^\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}Z$
        description: ISO 8601 timestamp
      responses:
        '200':
          description: Successful response
          content:
            application/octet-stream:
              schema:
                $ref: '#/components/schemas/bill_vote_event_logs'
        '404':
          description: Not found
components:
  schemas:
    bill_vote_event_logs:
      type: object
      properties:
        bill_identifier:
          type: string
          description: The bill identifier (e.g., SF0001)
        extras:
          type: object
          description: Additional metadata specific to the jurisdiction
        bill_action:
          type: string
          description: Optional reference to a specific bill action
          nullable: true
        start_date:
          type: string
          description: ISO 8601 timestamp of when the vote occurred
          format: date-time
        motion_text:
          type: string
          description: Text describing the motion being voted on
        counts:
          type: array
          description: Array of vote count objects
        legislative_session:
          type: string
          description: The legislative session identifier
        bill:
          type: string
          description: ID reference to the related bill
        votes:
          type: array
          description: Array of individual vote objects
        motion_classification:
          type: array
          items:
            type: string
          description: Array of motion classification strings
        identifier:
          type: string
          description: Optional identifier for the vote event (may be empty string)
        organization:
          type: string
          description: The organization conducting the vote, may be a JSON string
        result:
          type: string
          description: Result of the vote
        sources:
          type: array
          description: Array of source objects
      required:
      - identifier
      - motion_text
      - motion_classification
      - start_date
      - result
      - organization
      - legislative_session
      - bill
      - bill_action
      - bill_identifier
      - votes
      - counts
      - sources
      - extras
      description: Schema for validating vote event log files from formatted snapshots
    bill_metadata:
      type: object
      properties:
        _processing:
          type: object
          properties:
            text_extraction_latest_update:
              type: string
              description: ISO 8601 timestamp of when text extraction was last updated
              format: date-time
            logs_latest_update:
              type: string
              description: ISO 8601 timestamp of when logs were last updated
              format: date-time
          description: Processing metadata
        versions:
          type: array
          description: Array of version objects
        sources:
          type: array
          description: Array of source objects
        identifier:
          type: string
          description: The bill identifier (e.g., SF0001)
        subject:
          type: array
          items:
            type: string
          description: Array of subject tags
        extras:
          type: object
          description: Additional metadata specific to the jurisdiction
        related_bills:
          type: array
          items:
            type: object
          description: Array of related bill objects
        classification:
          type: array
          items:
            type: string
          description: Array of classification strings (e.g., ['bill'])
        from_organization:
          type: string
          description: The organization that introduced the bill, may be a JSON string
          nullable: true
        legislative_session:
          type: string
          description: The legislative session identifier
        sponsorships:
          type: array
          description: Array of sponsorship objects
        citations:
          type: array
          items:
            type: object
          description: Array of citation objects
        abstracts:
          type: array
          items:
            type: object
            properties:
              abstract:
                type: string
              note:
                type: string
          description: Array of abstract objects
        actions:
          type: array
          description: Array of action objects representing bill history
        other_titles:
          type: array
          items:
            type: object
            properties:
              title:
                type: string
              note:
                type: string
          description: Array of alternative title objects
        other_identifiers:
          type: array
          items:
            type: string
          description: Array of other identifier strings
        title:
          type: string
          description: The title of the bill
        documents:
          type: array
          description: Array of document objects
      required:
      - legislative_session
      - identifier
      - title
      - classification
      - jurisdiction
      description: Schema for validating bill metadata.json files from formatted snapshots
    bill_action_logs:
      type: object
      properties:
        bill_id:
          type: string
          description: The bill identifier (e.g., SF0001)
      required:
      - action
      - bill_id
      description: Schema for validating action log files from formatted snapshots (includes both action logs and classification logs)
