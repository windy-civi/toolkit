name: Test OpenStates Scraper for âœï¸{ locale.key }âœï¸

on:
  workflow_dispatch:
    inputs:
      scraper-fork:
        description: 'GitHub user/org with fork (e.g., YOUR_USERNAME)'
        required: true
      scraper-branch:
        description: 'Branch to test (e.g., fix/mo-empty-title)'
        required: true
        default: 'main'
      force-update:
        type: boolean
        description: "Force update even if data exists"
        default: false

env:
  STATE_CODE: âœï¸{ locale.key }âœï¸

jobs:
  test-scrape:
    name: "ğŸ§ª Test Scraper for âœï¸{ locale.name }âœï¸"
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Checkout state repo
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Test scraper with fork
        uses: windy-civi/toolkit/actions/test-scraper@âœï¸{ locale.toolkit_branch }âœï¸
        with:
          scraper-fork: ${{ inputs.scraper-fork }}
          scraper-branch: ${{ inputs.scraper-branch }}
          state: ${{ env.STATE_CODE }}
          github-token: ${{ secrets.GITHUB_TOKEN }}
          force-update: ${{ inputs.force-update }}
